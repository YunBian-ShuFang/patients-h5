import{t as p,n as V,c as q,u as y,a3 as R,x as T,w as $}from"./index-CWA1siCg.js";import{g as A}from"./request-uc666yY3.js";import{d as x,c as C}from"./index-DxsiHbDK.js";const[M,N]=q("form"),_={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:V,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:p,showErrorMessage:p,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var k=x({name:M,props:_,emits:["submit","failed"],setup(o,{emit:l,slots:u}){const{children:n,linkChildren:h}=y(R),i=e=>e?n.filter(t=>e.includes(t.name)):n,v=e=>new Promise((t,s)=>{const r=[];i(e).reduce((E,F)=>E.then(()=>{if(!r.length)return F.validate().then(g=>{g&&r.push(g)})}),Promise.resolve()).then(()=>{r.length?s(r):t()})}),b=e=>new Promise((t,s)=>{const r=i(e);Promise.all(r.map(a=>a.validate())).then(a=>{a=a.filter(Boolean),a.length?s(a):t()})}),P=e=>{const t=n.find(s=>s.name===e);return t?new Promise((s,r)=>{t.validate().then(a=>{a?r(a):s()})}):Promise.reject()},d=e=>typeof e=="string"?P(e):o.validateFirst?v(e):b(e),S=e=>{typeof e=="string"&&(e=[e]),i(e).forEach(s=>{s.resetValidation()})},w=()=>n.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),c=(e,t)=>{n.some(s=>s.name===e?(s.$el.scrollIntoView(t),!0):!1)},m=()=>n.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),f=()=>{const e=m();d().then(()=>l("submit",e)).catch(t=>{l("failed",{values:e,errors:t});const{scrollToError:s,scrollToErrorPosition:r}=o;s&&t[0].name&&c(t[0].name,r?{block:r}:void 0)})},B=e=>{T(e),f()};return h({props:o}),A({submit:f,validate:d,getValues:m,scrollToField:c,resetValidation:S,getValidationStatus:w}),()=>{var e;return C("form",{class:N(),onSubmit:B},[(e=u.default)==null?void 0:e.call(u)])}}});const D=$(k),K=[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],W=[{required:!0,message:"请输入密码"},{pattern:/^\w{8,24}$/,message:"密码需要8-24个字符"}],X=[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"验证码6位数字"}],Y=[{required:!0,message:"请输入姓名"},{pattern:/^(?:[\u4e00-\u9fa5·]{2,16})$/,message:"中文2-16个字符"}],z=[{required:!0,message:"请输入身份证号码"},{pattern:/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/,message:"身份证号不正确"}];export{D as F,X as c,z as i,K as m,Y as n,W as p};
