import{_ as F}from"./CpRadioBtn-BxP_pk5t.js";import{_ as I}from"./CpIcon-BEJBC59c.js";import{_ as T}from"./CpNavBar-DJXLKEri.js";import{d as y,r as c,a as k,k as B,b as U,c as a,h as o,x as h,y as M,w as A,n as N,f as O,q as z,o as R,_ as S}from"./index-DxsiHbDK.js";import{_ as q}from"./avatar-doctor-uRRbKX0w.js";import{I as r}from"./index-DkUi12Jt.js";import{u as E}from"./consult-DKwhTIEN.js";import{U as H}from"./index-Bb9OfU9j.js";import{u as L}from"./consult-B3nWt7bb.js";import{s as P}from"./function-call-cRy0kGF_.js";import{F as W}from"./index-CsAhKhnm.js";import{B as Y}from"./index-CAQ9J4A5.js";import{a as m}from"./request-uc666yY3.js";import"./use-placeholder-DGGdHVxQ.js";import"./index-CWA1siCg.js";import"./function-call-BVFVrjNs.js";import"./index-DAaGYlz9.js";import"./interceptor-CO5Y9v1H.js";import"./index-HEDfruI8.js";import"./use-route-BFOmu3it.js";import"./index-C4bX3Bk5.js";import"./use-id-Dtm_qled.js";const $={class:"consult-illness-page"},j={class:"illness-tip van-hairline--bottom"},G={class:"info"},J={class:"safe"},K={class:"illness-form"},Q={class:"item"},X={class:"item"},Z={class:"illness-img"},ss={class:"tip"},ls=y({__name:"ConsultIllness",setup(es){const v=[{label:"一周内",value:r.Week},{label:"一月内",value:r.Month},{label:"半年内",value:r.HalfYear},{label:"大于半年",value:r.More}],_=[{label:"就诊过",value:1},{label:"没就诊过",value:0}],l=c({illnessDesc:"",illnessTime:void 0,consultFlag:void 0,pictures:[]}),i=c([]),f=e=>{console.log("item",e),!Array.isArray(e)&&e.file&&(e.status="uploading",e.message="上传中...",E(e.file).then(s=>{var t;e.status="done",e.message=void 0,e.url=s.data.url,(t=l.value.pictures)==null||t.push(s.data)}).catch(()=>{e.status="failed",e.message="上传失败"}))},g=e=>{var s;l.value.pictures=(s=l.value.pictures)==null?void 0:s.filter(t=>t.url!==e.url)},V=k(()=>!l.value.illnessDesc||l.value.illnessDesc===void 0||l.value.consultFlag===void 0),p=L(),b=z(),D=()=>{if(!l.value.illnessDesc)return m("请输入病情描述");if(l.value.illnessTime===void 0)return m("请选择症状持续时间");if(l.value.consultFlag===void 0)return m("请选择是否已经就诊");p.setIllness(l.value),b.push("/user/patient?isChange=1")};return B(async()=>{p.consult.illnessDesc&&await P({title:"温馨提示!",message:"是否恢复您之前填写的病情信息呢？",closeOnPopstate:!1}).then(()=>{const{illnessDesc:e,illnessTime:s,consultFlag:t,pictures:u}=p.consult;l.value={illnessDesc:e,illnessTime:s,consultFlag:t,pictures:u},i.value=u||[]})}),(e,s)=>{const t=T,u=I,x=W,d=F,C=H,w=Y;return R(),U("div",$,[a(t,{title:"图文问诊"}),o("div",j,[s[7]||(s[7]=o("img",{class:"img",src:q,alt:""},null,-1)),o("div",G,[s[5]||(s[5]=o("p",{class:"title"},"在线医生",-1)),s[6]||(s[6]=o("p",{class:"tip"}," 请描述你的疾病或症状、是否用药、就诊经历，需要我提供什么样的帮助 ",-1)),o("p",J,[a(u,{name:"consult-safe"}),s[4]||(s[4]=o("span",null,"内容仅医生可见",-1))])])]),o("div",K,[a(x,{type:"textarea",rows:"3",placeholder:"请详细描述您的病情，病情描述不能为空",modelValue:l.value.illnessDesc,"onUpdate:modelValue":s[0]||(s[0]=n=>l.value.illnessDesc=n)},null,8,["modelValue"]),o("div",Q,[s[8]||(s[8]=o("p",null,"本次患病多久了？",-1)),a(d,{options:v,modelValue:l.value.illnessTime,"onUpdate:modelValue":s[1]||(s[1]=n=>l.value.illnessTime=n)},null,8,["modelValue"])]),o("div",X,[s[9]||(s[9]=o("p",null,"此次病情是否去医院就诊过？",-1)),a(d,{options:_,modelValue:l.value.consultFlag,"onUpdate:modelValue":s[2]||(s[2]=n=>l.value.consultFlag=n)},null,8,["modelValue"])]),o("div",Z,[a(C,{modelValue:i.value,"onUpdate:modelValue":s[3]||(s[3]=n=>i.value=n),"after-read":f,onDelete:g,"max-count":"9","max-size":5*1024*1024,"upload-icon":"photo-o","upload-text":"上传图片"},null,8,["modelValue"]),h(o("p",ss," 上传内容仅医生可见，最多9张图片，最大5MB ",512),[[M,i.value.length===0]])]),a(w,{class:N({disabled:V.value}),onClick:D,type:"primary",block:"",round:""},{default:A(()=>s[10]||(s[10]=[O(" 下一步 ")])),_:1},8,["class"])])])}}}),Is=S(ls,[["__scopeId","data-v-799f2c55"]]);export{Is as default};
