import{C as j}from"./CpPaySheet-CJJoXvvh.js";import{_ as q}from"./CpNavBar-DJXLKEri.js";import{_ as z}from"./avatar-doctor-uRRbKX0w.js";import{O as v}from"./index-DkUi12Jt.js";import{d as A}from"./consult-DKwhTIEN.js";import{t as E,f as G,C as L}from"./constants-D5FBW-i0.js";import{d as U,r as P,k as W,s as H,b as m,c as o,h as a,p as f,t as g,n as J,u as l,w as s,f as n,j as k,q as K,o as r,_ as Q}from"./index-DxsiHbDK.js";import{a as X}from"./index-Bd9qujd1.js";import{C as Y}from"./ConsultMore-ChHfxKVB.js";import{b as Z,c as h,d as tt}from"./index-LNuaGgvi.js";import{S as et}from"./index-Bjr7kZ_k.js";import{I as ot}from"./index-CWA1siCg.js";import{C as lt}from"./index-DSVSFtNC.js";import{B as at}from"./index-CAQ9J4A5.js";import{C as st}from"./index-C4bX3Bk5.js";import{a as x}from"./request-uc666yY3.js";import"./CpIcon-BEJBC59c.js";import"./index-YrVuF1XM.js";import"./use-placeholder-DGGdHVxQ.js";import"./order-VamOOSqx.js";import"./function-call-BVFVrjNs.js";import"./index-DAaGYlz9.js";import"./interceptor-CO5Y9v1H.js";import"./use-route-BFOmu3it.js";const nt=y=>{console.log("问诊时间",y);const i=E.find(C=>C.value===y);return console.log(i,"result time"),i?i.label:void 0},ut=y=>{console.log("是否就诊过",y);const i=G.find(C=>C.value===y);return console.log(i,"result flag"),i?i.label:void 0},rt={key:0,class:"consult-detail-page"},it={class:"detail-head"},dt={class:"text"},pt={class:"card"},vt={class:"detail-patient"},mt={class:"detail-order"},ft={key:0,class:"detail-time"},yt={key:1,class:"detail-foot van-hairline--top"},Ct={class:"price"},_t={key:2,class:"detail-foot van-hairline--top"},gt={key:3,class:"detail-foot van-hairline--top"},ct={key:4,class:"detail-foot van-hairline--top"},kt={key:5,class:"detail-foot van-hairline--top"},wt={key:1,class:"consult-detail-page"},$t=U({__name:"ConsultDetail",setup(y){const{loading:i,cancelConsultOrder:C}=Z(),D=K(),{loading:T,delConsultOrder:w}=h(()=>{D.push("/user/consult")}),{showPrescription:$}=tt(),{copy:B,isSupported:N}=X(),S=async()=>{var _;if(!N.value)return x("未授权，不支持");await B(((_=e.value)==null?void 0:_.orderNo)||""),x("已复制")},c=P(!1),V=H(),e=P();return W(async()=>{const _=await A(V.params.id);e.value=_.data}),(_,t)=>{const I=q,F=ot,d=st,b=lt,M=L,u=at,R=j,O=et;return e.value?(r(),m("div",rt,[o(I,{title:"问诊详情"}),a("div",it,[a("div",dt,[a("h3",null,"图文问诊 "+g(e.value.payment)+" 元",1),a("span",{class:J(["status",{orange:e.value.status===l(v).ConsultPay,green:e.value.status===l(v).ConsultChat}])},g(e.value.statusValue),3),t[8]||(t[8]=a("p",{class:"tip"},"服务医生信息",-1))]),a("div",pt,[t[9]||(t[9]=a("img",{class:"avatar",src:z,alt:""},null,-1)),t[10]||(t[10]=a("p",{class:"doc"},[a("span",null,"极速问诊"),a("span",null,"自动分配医生")],-1)),o(F,{name:"arrow"})])]),a("div",vt,[o(b,{border:!1},{default:s(()=>[o(d,{title:"患者信息",value:`${e.value.patientInfo.name} | ${e.value.patientInfo.genderValue} | ${e.value.patientInfo.age}岁`},null,8,["value"]),o(d,{title:"患病时长",value:l(nt)(e.value.illnessTime)},null,8,["value"]),o(d,{title:"就诊情况",value:l(ut)(e.value.consultFlag)},null,8,["value"]),o(d,{title:"病情描述",label:e.value.illnessDesc},null,8,["label"])]),_:1})]),a("div",mt,[t[11]||(t[11]=a("h3",null,"订单信息",-1)),o(b,{border:!1},{default:s(()=>[o(d,{title:"订单编号"},{value:s(()=>[a("span",{class:"copy",onClick:S},"复制"),n(" "+g(e.value.orderNo),1)]),_:1}),o(d,{title:"创建时间",value:e.value.createTime},null,8,["value"]),o(d,{title:"应付款",value:`￥${e.value.payment}`},null,8,["value"]),o(d,{title:"优惠券",value:`-￥${e.value.couponDeduction}`},null,8,["value"]),o(d,{title:"积分抵扣",value:`-￥${e.value.pointDeduction}`},null,8,["value"]),o(d,{title:"实付款",value:`￥${e.value.actualPayment}`,class:"price"},null,8,["value"])]),_:1})]),e.value.status===l(v).ConsultPay?(r(),m("div",ft,[t[12]||(t[12]=n(" 请在 ")),o(M,{time:e.value.countdown*1e3},null,8,["time"]),t[13]||(t[13]=n(" 内完成支付，超时订单将取消 "))])):f("",!0),e.value.status===l(v).ConsultPay?(r(),m("div",yt,[a("div",Ct,[t[14]||(t[14]=a("span",null,"需付款",-1)),a("span",null,"￥"+g(e.value.actualPayment),1)]),o(u,{type:"default",round:"",loading:l(i),onClick:t[0]||(t[0]=p=>l(C)(e.value))},{default:s(()=>t[15]||(t[15]=[n(" 取消问诊 ")])),_:1},8,["loading"]),o(u,{type:"primary",round:"",onClick:t[1]||(t[1]=p=>c.value=!0)},{default:s(()=>t[16]||(t[16]=[n(" 继续支付 ")])),_:1})])):f("",!0),e.value.status===l(v).ConsultWait?(r(),m("div",_t,[o(u,{type:"default",round:"",loading:l(i),onClick:t[2]||(t[2]=p=>l(C)(e.value))},{default:s(()=>t[17]||(t[17]=[n(" 取消问诊 ")])),_:1},8,["loading"]),o(u,{type:"primary",round:"",to:`/room?orderId=${e.value.id}`},{default:s(()=>t[18]||(t[18]=[n(" 继续沟通 ")])),_:1},8,["to"])])):f("",!0),e.value.status===l(v).ConsultChat?(r(),m("div",gt,[e.value.prescriptionId?(r(),k(u,{key:0,type:"default",round:"",onClick:t[3]||(t[3]=p=>l($)(e.value))},{default:s(()=>t[19]||(t[19]=[n(" 查看处方 ")])),_:1})):f("",!0),o(u,{type:"primary",round:"",to:`/room?orderId=${e.value.id}`},{default:s(()=>t[20]||(t[20]=[n(" 继续沟通 ")])),_:1},8,["to"])])):f("",!0),e.value.status===l(v).ConsultComplete?(r(),m("div",ct,[o(Y,{disabled:!e.value.prescriptionId,onOnDelete:t[4]||(t[4]=p=>l(w)(e.value)),onOnPreview:t[5]||(t[5]=p=>l($)(e.value))},null,8,["disabled"]),o(u,{type:"default",round:"",to:`/room?orderId=${e.value.id}`},{default:s(()=>t[21]||(t[21]=[n(" 问诊记录 ")])),_:1},8,["to"]),e.value.evaluateId?(r(),k(u,{key:0,type:"primary",round:""},{default:s(()=>t[22]||(t[22]=[n(" 查看评价 ")])),_:1})):(r(),k(u,{key:1,type:"primary",round:""},{default:s(()=>t[23]||(t[23]=[n("写评价")])),_:1}))])):f("",!0),e.value.status===l(v).ConsultCancel?(r(),m("div",kt,[o(u,{type:"default",round:"",loading:l(T),onClick:t[6]||(t[6]=p=>l(w)(e.value))},{default:s(()=>t[24]||(t[24]=[n(" 删除订单 ")])),_:1},8,["loading"]),o(u,{type:"primary",round:"",to:"/"},{default:s(()=>t[25]||(t[25]=[n("咨询其他医生")])),_:1})])):f("",!0),o(R,{show:c.value,"onUpdate:show":t[7]||(t[7]=p=>c.value=p),"order-id":e.value.id,"actual-payment":e.value.actualPayment},null,8,["show","order-id","actual-payment"])])):(r(),m("div",wt,[o(I,{title:"问诊详情"}),o(O,{title:"",row:4,style:{"margin-top":"30px"}}),o(O,{title:"",row:4,style:{"margin-top":"30px"}})]))}}}),Jt=Q($t,[["__scopeId","data-v-6e01d12d"]]);export{Jt as default};
