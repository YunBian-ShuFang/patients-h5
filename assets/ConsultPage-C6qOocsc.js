import{_ as V}from"./CpNavBar-DJXLKEri.js";import{O as f,C as D}from"./index-DkUi12Jt.js";import{_ as F}from"./avatar-doctor-uRRbKX0w.js";import{b as N,c as S,d as M}from"./index-LNuaGgvi.js";import{d as T,b as u,h as l,p as g,t as b,n as j,u as e,c as o,w as n,f as r,j as I,q,o as i,_ as P,r as z,F as E,i as R}from"./index-DxsiHbDK.js";import{C as W}from"./ConsultMore-ChHfxKVB.js";import{B as A}from"./index-CAQ9J4A5.js";import{f as G}from"./consult-DKwhTIEN.js";import{L as H,T as J,a as K}from"./index-D0Mgx2PE.js";import"./use-placeholder-DGGdHVxQ.js";import"./index-CWA1siCg.js";import"./request-uc666yY3.js";import"./interceptor-CO5Y9v1H.js";import"./order-VamOOSqx.js";import"./function-call-BVFVrjNs.js";import"./index-DAaGYlz9.js";import"./use-route-BFOmu3it.js";import"./use-id-Dtm_qled.js";import"./use-refs-CftPxIFx.js";const Q={class:"consult-item"},U={class:"head van-hairline--bottom"},X={class:"body-row"},Y={class:"body-value"},Z={class:"body-row"},h={class:"body-value"},x={class:"body-row"},tt={class:"body-value"},st={key:0,class:"foot"},et={key:1,class:"foot"},ot={key:2,class:"foot"},nt={key:3,class:"foot"},lt={key:4,class:"foot"},it=T({__name:"ConsultItem",props:{item:{}},emits:["on-delete"],setup(c,{emit:w}){const{loading:v,cancelConsultOrder:m}=N(),{loading:p,delConsultOrder:d}=S(()=>{y("on-delete",k.item.id)}),{showPrescription:_}=M(),k=c,y=w,$=q(),O=s=>{$.push(`/user/consult/${s}`)};return(s,t)=>{var B;const a=A;return i(),u("div",Q,[l("div",U,[t[7]||(t[7]=l("img",{class:"img",src:F,alt:""},null,-1)),l("p",null,b(((B=s.item.docInfo)==null?void 0:B.name)||"暂未分配医生"),1),l("span",{class:j({orange:s.item.status===e(f).ConsultPay,green:s.item.status===e(f).ConsultChat})},b(s.item.statusValue),3)]),l("div",{class:"body",onClick:t[0]||(t[0]=C=>O(s.item.id))},[l("div",X,[t[8]||(t[8]=l("div",{class:"body-label"},"病情描述",-1)),l("div",Y,b(s.item.illnessDesc),1)]),l("div",Z,[t[9]||(t[9]=l("div",{class:"body-label"},"价格",-1)),l("div",h,"¥ "+b(s.item.payment.toFixed(2)),1)]),l("div",x,[t[10]||(t[10]=l("div",{class:"body-label"},"创建时间",-1)),l("div",tt,b(s.item.createTime),1)])]),s.item.status===e(f).ConsultPay?(i(),u("div",st,[o(a,{class:"gray",plain:"",size:"small",round:"",loading:e(v),onClick:t[1]||(t[1]=C=>e(m)(s.item))},{default:n(()=>t[11]||(t[11]=[r("取消问诊")])),_:1},8,["loading"]),o(a,{type:"primary",plain:"",size:"small",round:"",to:`/user/consult/${s.item.id}`},{default:n(()=>t[12]||(t[12]=[r(" 去支付 ")])),_:1},8,["to"])])):g("",!0),s.item.status===e(f).ConsultWait?(i(),u("div",et,[o(a,{class:"gray",plain:"",size:"small",round:"",loading:e(v),onClick:t[2]||(t[2]=C=>e(m)(s.item))},{default:n(()=>t[13]||(t[13]=[r("取消问诊")])),_:1},8,["loading"]),o(a,{type:"primary",plain:"",size:"small",round:"",to:`/room?orderId=${s.item.id}`},{default:n(()=>t[14]||(t[14]=[r(" 继续沟通 ")])),_:1},8,["to"])])):g("",!0),s.item.status===e(f).ConsultChat?(i(),u("div",ot,[s.item.prescriptionId?(i(),I(a,{key:0,class:"gray",plain:"",size:"small",round:"",onClick:t[3]||(t[3]=C=>e(_)(s.item))},{default:n(()=>t[15]||(t[15]=[r(" 查看处方")])),_:1})):g("",!0),o(a,{type:"primary",plain:"",size:"small",round:"",to:`/room?orderId=${s.item.id}`},{default:n(()=>t[16]||(t[16]=[r(" 继续沟通 ")])),_:1},8,["to"])])):g("",!0),s.item.status===e(f).ConsultComplete?(i(),u("div",nt,[o(W,{disabled:!k.item.prescriptionId,onOnDelete:t[4]||(t[4]=C=>e(d)(s.item)),onOnPreview:t[5]||(t[5]=C=>e(_)(s.item))},null,8,["disabled"]),o(a,{class:"gray",plain:"",size:"small",round:"",to:`/room?orderId=${s.item.id}`},{default:n(()=>t[17]||(t[17]=[r("问诊记录")])),_:1},8,["to"]),s.item.evaluateId?(i(),I(a,{key:1,class:"gray",plain:"",size:"small",round:""},{default:n(()=>t[19]||(t[19]=[r(" 查看评价 ")])),_:1})):(i(),I(a,{key:0,type:"primary",plain:"",size:"small",round:"",to:"/"},{default:n(()=>t[18]||(t[18]=[r(" 去评价 ")])),_:1}))])):g("",!0),s.item.status===e(f).ConsultCancel?(i(),u("div",lt,[o(a,{class:"gray",plain:"",size:"small",round:"",loading:e(p),onClick:t[6]||(t[6]=C=>e(d)(s.item))},{default:n(()=>t[20]||(t[20]=[r("删除订单")])),_:1},8,["loading"]),o(a,{type:"primary",plain:"",size:"small",round:"",to:"/"},{default:n(()=>t[21]||(t[21]=[r(" 咨询其他医生 ")])),_:1})])):g("",!0)])}}}),at=P(it,[["__scopeId","data-v-9c73b73b"]]),rt={class:"consult-list"},dt=T({__name:"ConsultList",props:{type:{}},setup(c){const v=z({type:c.type,current:1,pageSize:5}),m=z(!1),p=z(!1),d=z([]),_=async()=>{m.value=!0;try{const y=await G(v.value);console.log("问诊记录订单列表",y),d.value.push(...y.data.rows),v.value.current<y.data.pageTotal?v.value.current++:p.value=!0}finally{m.value=!1}},k=y=>{d.value=d.value.filter($=>$.id!==y),d.value.length||_()};return(y,$)=>{const O=H;return i(),u("div",rt,[o(O,{loading:m.value,finished:p.value,"finished-text":"没有更多了",onLoad:_},{default:n(()=>[(i(!0),u(E,null,R(d.value,s=>(i(),I(at,{key:s.id,item:s,onOnDelete:k},null,8,["item"]))),128))]),_:1},8,["loading","finished"])])}}}),L=P(dt,[["__scopeId","data-v-274d2a28"]]),ut={class:"consult-page"},mt=T({__name:"ConsultPage",setup(c){return(w,v)=>{const m=V,p=K,d=J;return i(),u("div",ut,[o(m,{title:"问诊记录"}),o(d,{sticky:""},{default:n(()=>[o(p,{title:"极速问诊"},{default:n(()=>[o(L,{type:e(D).Fast},null,8,["type"])]),_:1}),o(p,{title:"找医生"},{default:n(()=>[o(L,{type:e(D).Doctor},null,8,["type"])]),_:1}),o(p,{title:"开药问诊"},{default:n(()=>[o(L,{type:e(D).Medication},null,8,["type"])]),_:1})]),_:1})])}}}),Bt=P(mt,[["__scopeId","data-v-e42a8a1e"]]);export{Bt as default};
